<Application x:Class="Lvchaxs_ZH.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             StartupUri="MainWindow.xaml">
    <Application.Resources>
        <ResourceDictionary>
            <!-- 移除焦点虚线框的样式 -->
            <Style TargetType="Button">
                <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
            </Style>

            <Style TargetType="TextBox">
                <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
            </Style>

            <Style TargetType="DataGrid">
                <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
            </Style>

            <Style TargetType="ScrollBar">
                <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
            </Style>

            <Style TargetType="DataGridCell">
                <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
            </Style>

            <Style TargetType="DataGridColumnHeader">
                <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
            </Style>

            <ResourceDictionary.MergedDictionaries>
                <!-- 直接包含 ScrollBarStyles.xaml 的内容 -->
                <ResourceDictionary>
                    <!-- 现代滚动条样式 -->
                    <Style x:Key="ModernScrollBar" TargetType="{x:Type ScrollBar}">
                        <Setter Property="Stylus.IsFlicksEnabled" Value="False"/>
                        <Setter Property="Foreground" Value="Transparent"/>
                        <Setter Property="Background" Value="Transparent"/>
                        <Setter Property="Width" Value="14"/>
                        <Setter Property="MinWidth" Value="14"/>
                        <Setter Property="MinHeight" Value="14"/>
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="{x:Type ScrollBar}">
                                    <Grid x:Name="GridRoot" Background="{TemplateBinding Background}">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="0.00001*"/>
                                        </Grid.RowDefinitions>

                                        <Track x:Name="PART_Track" 
                                               Grid.Row="0"
                                               IsDirectionReversed="true">

                                            <!-- 减小按钮 -->
                                            <Track.DecreaseRepeatButton>
                                                <RepeatButton x:Name="DecreaseRepeatButton"
                                                              Command="{x:Static ScrollBar.LineUpCommand}"
                                                              Opacity="0"
                                                              IsTabStop="False"/>
                                            </Track.DecreaseRepeatButton>

                                            <!-- 滑块轨道 -->
                                            <Track.Thumb>
                                                <Thumb x:Name="Thumb" 
                                                       Background="{TemplateBinding Foreground}"
                                                       Margin="0">
                                                    <Thumb.Template>
                                                        <ControlTemplate TargetType="{x:Type Thumb}">
                                                            <Border x:Name="ThumbBorder"
                                                                    Background="{TemplateBinding Background}"
                                                                    CornerRadius="4"/>
                                                        </ControlTemplate>
                                                    </Thumb.Template>
                                                </Thumb>
                                            </Track.Thumb>

                                            <!-- 增大按钮 -->
                                            <Track.IncreaseRepeatButton>
                                                <RepeatButton x:Name="IncreaseRepeatButton"
                                                              Command="{x:Static ScrollBar.LineDownCommand}"
                                                              Opacity="0"
                                                              IsTabStop="False"/>
                                            </Track.IncreaseRepeatButton>
                                        </Track>
                                    </Grid>

                                    <ControlTemplate.Triggers>
                                        <!-- 垂直滚动条 -->
                                        <Trigger Property="Orientation" Value="Vertical">
                                            <Setter TargetName="Thumb" Property="Width" Value="6"/>
                                            <Setter TargetName="Thumb" Property="MinHeight" Value="40"/>
                                            <Setter TargetName="Thumb" Property="HorizontalAlignment" Value="Right"/>
                                            <Setter TargetName="Thumb" Property="Margin" Value="4,0,4,0"/>
                                        </Trigger>

                                        <!-- 水平滚动条 -->
                                        <Trigger Property="Orientation" Value="Horizontal">
                                            <Setter TargetName="Thumb" Property="Height" Value="6"/>
                                            <Setter TargetName="Thumb" Property="MinWidth" Value="40"/>
                                            <Setter TargetName="Thumb" Property="VerticalAlignment" Value="Bottom"/>
                                            <Setter TargetName="Thumb" Property="Margin" Value="0,4,0,4"/>
                                        </Trigger>

                                        <!-- 悬停状态 -->
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter TargetName="Thumb" Property="Background" Value="#A0AEC0"/>
                                        </Trigger>

                                        <!-- 默认状态（未悬停） -->
                                        <Trigger Property="IsMouseOver" Value="False">
                                            <Setter TargetName="Thumb" Property="Background" Value="#CBD5E0"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>

                    <!-- ScrollViewer 样式 -->
                    <Style x:Key="ModernScrollViewer" TargetType="{x:Type ScrollViewer}">
                        <Setter Property="HorizontalScrollBarVisibility" Value="Auto"/>
                        <Setter Property="VerticalScrollBarVisibility" Value="Auto"/>
                        <Setter Property="Background" Value="Transparent"/>
                        <Setter Property="BorderBrush" Value="Transparent"/>
                        <Setter Property="BorderThickness" Value="0"/>
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="{x:Type ScrollViewer}">
                                    <Grid x:Name="Grid" Background="{TemplateBinding Background}">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="*"/>
                                            <RowDefinition Height="Auto"/>
                                        </Grid.RowDefinitions>

                                        <!-- 内容区域 -->
                                        <ScrollContentPresenter x:Name="PART_ScrollContentPresenter"
                                                                Grid.Column="0"
                                                                Grid.Row="0"
                                                                Margin="{TemplateBinding Padding}"
                                                                Content="{TemplateBinding Content}"
                                                                ContentTemplate="{TemplateBinding ContentTemplate}"
                                                                CanContentScroll="{TemplateBinding CanContentScroll}"/>

                                        <!-- 垂直滚动条 -->
                                        <ScrollBar x:Name="PART_VerticalScrollBar"
                                                   Grid.Column="1"
                                                   Grid.Row="0"
                                                   Style="{StaticResource ModernScrollBar}"
                                                   Value="{TemplateBinding VerticalOffset}"
                                                   Maximum="{TemplateBinding ScrollableHeight}"
                                                   ViewportSize="{TemplateBinding ViewportHeight}"
                                                   Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}"/>

                                        <!-- 水平滚动条 -->
                                        <ScrollBar x:Name="PART_HorizontalScrollBar"
                                                   Grid.Column="0"
                                                   Grid.Row="1"
                                                   Style="{StaticResource ModernScrollBar}"
                                                   Orientation="Horizontal"
                                                   Value="{TemplateBinding HorizontalOffset}"
                                                   Maximum="{TemplateBinding ScrollableWidth}"
                                                   ViewportSize="{TemplateBinding ViewportWidth}"
                                                   Visibility="{TemplateBinding ComputedHorizontalScrollBarVisibility}"/>
                                    </Grid>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>

                    <!-- 为所有滚动条应用默认样式 -->
                    <Style TargetType="{x:Type ScrollBar}" BasedOn="{StaticResource ModernScrollBar}"/>
                    <Style TargetType="{x:Type ScrollViewer}" BasedOn="{StaticResource ModernScrollViewer}"/>
                </ResourceDictionary>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Application.Resources>
</Application>